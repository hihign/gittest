<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>发送ajax请求，实现省市联动</title>
</head>
<body>
<script type="text/javascript" src="/ajax04/js/jQuery-1.0.0.js"></script>
<script type="text/javascript">
    $(function(){
        $.ajax({
            "type":"get",
            "url":"/ajax04/request03"+"?t="+new Date().getTime(),
            "async":true,
            "success":function (jsonObj){
                html="<option value=\"\">--请选择省份--</option>"
                for (var i=0; i<jsonObj.length; i++){
                    var area = jsonObj[i]
                    html+="<option value="+area.code+">"+area.name+"</option>"
                }
                $("#province").html(html)
            }
        })
        //下面的代码只能放到这里，下面的注释代码是得不到节点元素province的，因为onload事件在$(函数)里发生，括号里必须是函数才会onload
        $("#province").change(function (){
            $.ajax({
                "type":"get",
                "url":"/ajax04/request03"+"?pcode="+this.value+"&t="+new Date().getTime(),
                "async":true,
                "success":function (jsonObj){
                    html="<option value=\"\">--请选择市区--</option>"
                    for (var i=0; i<jsonObj.length; i++){
                        var area = jsonObj[i]
                        html+="<option value="+area.code+">"+area.name+"</option>"
                    }
                    $("#city").html(html)
                }
            })
        })
    })

   /* $("#province").change(function (){
        $.ajax({
            "type":"get",
            "url":"/ajax04/request03"+"?pcode="+this.value+"&t="+new Date().getTime(),
            "async":true,
            "success":function (jsonObj){
                html="<option value=\"\">--请选择市区--</option>"
                for (var i=0; i<jsonObj.length; i++){
                    var area = jsonObj[i]
                    html+="<option value="+area.code+">"+area.name+"</option>"
                }
                $("#city").html(html)
            }
        })
    })*/
</script>


<select id="province">
<!--    <option value="">&#45;&#45;请选择省份&#45;&#45;</option>
    <option value="001">湖南省</option>
    <option value="002">湖北省</option>-->
</select>
<select id="city">

</select>
</body>
</html>